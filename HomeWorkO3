using System;
using System.Collections.Generic;

namespace HomeWork_30
{
    class Program
    {
        static void Main(string[] args)
        {
            Datebase dateBase = new Datebase();

            bool isWork = true;
            const string OneCommand = "1";
            const string TwoCommand = "2";
            const string ThreeCommand = "3";
            const string FourCommand = "4";
            const string FiveCommand = "5";
            const string SixCommand = "6";

            while (isWork)
            {
                Console.WriteLine("1 - добавить\n2 - удалить\n3 - забанить\n4 - разбанить\n5 - показать\n6 - выйти");
                string userInput = Console.ReadLine();

                switch (userInput)
                {
                    case OneCommand:
                        dateBase.AddPlayer();
                        break;
                    case TwoCommand:
                        dateBase.RemovePlayer();
                        break;
                    case ThreeCommand:
                        dateBase.BanPlayer();
                        break;
                    case FourCommand:
                        dateBase.UnBanPlayer();
                        break;
                    case FiveCommand:
                        dateBase.ShowInfo();
                        break;
                    case SixCommand:
                        isWork = false;
                        break;
                }
                Console.ReadKey();
                Console.Clear();
            }
        }

        class Datebase
        {
            private List<Player> _player = new List<Player>();

            public Datebase() { }

            public void BanPlayer()
            {
                Console.WriteLine("Введите номер пользователя, которого хотите забанить");

                if (TryGetPlayer(out Player player))
                    player.Ban();
                else
                    Console.WriteLine("нельзя");
            }

            public void UnBanPlayer()
            {
                Console.WriteLine("Введите номер пользователя, которого хотите разбанить");

                if (TryGetPlayer(out Player player))
                    player.UnBan();
                else
                    Console.WriteLine("нельзя");
            }

            public void AddPlayer()
            {
                Random random = new Random();

                Console.Write("Введите имя: ");
                string name = Console.ReadLine();

                Console.Write("Введите уровень: ");
                string level = Console.ReadLine();
                int.TryParse(level, out int inputLevel);

                _player.Add(new Player( name, inputLevel));
            }

            public void RemovePlayer()
            {
                Console.WriteLine("Введите номер человека, которого хотите удалить");

                if (TryGetPlayer(out Player player))
                    _player.Remove(player);
                else
                    Console.WriteLine("нельзя");
            }

            public void ShowInfo()
            {
                int id = 0;
                foreach (Player player in _player)
                {
                    Console.WriteLine(id + 1 + " " + player);
                    id++;
                }
            }

            private bool TryGetPlayer(out Player player)
            {
                player = null;
                string id = Console.ReadLine();

                int.TryParse(id, out int inputId);

                if (inputId >= 1 && inputId <= _player.Count)
                {
                    player = _player[inputId - 1];
                    return true;
                }
                else
                {
                    return false;
                }      
            }
        }

        class Player
        {
            public int Id { get; private set; }
            public static int Ids { get; private set; }
            public string Name { get; private set; }
            public int Level { get; private set; }
            public bool IsBaned { get; private set; }

            public Player( string name, int level)
            {
                Name = name;
                Id = ++Ids;
                Level = level;
                IsBaned = false;
            }

            public void Ban()
            {
                IsBaned = true;
            }

            public void UnBan()
            {
                IsBaned = false;
            }

            public override string ToString()
            {
                return "ID: " + Id + "   Name: " + Name + "   Level: " + Level + "   Flag: " + IsBaned;
            }
        }
    }
}
